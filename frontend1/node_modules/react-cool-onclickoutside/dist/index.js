"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=function(e,n){for(var t=e.target||e;t;){var r;if(null!=(r=t.classList)&&r.contains(n))return!0;t=t.parentElement}return!1},t=function(e){return!(!e.includes("touch")||!function(){if("undefined"==typeof window||"function"!=typeof window.addEventListener)return!1;var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0}}),t=function(){return null};return window.addEventListener("test",t,n),window.removeEventListener("test",t,n),e}())&&{passive:!0}};exports.DEFAULT_IGNORE_CLASS="ignore-onclickoutside",exports.default=function(r,u){var i=void 0===u?{}:u,o=i.refs,c=i.disabled,d=i.eventTypes,s=void 0===d?["mousedown","touchstart"]:d,a=i.excludeScrollbar,f=i.ignoreClass,l=void 0===f?"ignore-onclickoutside":f,v=i.detectIFrame,m=void 0===v||v,E=e.useState([]),w=E[0],p=E[1],g=e.useRef(r);g.current=r;var h=e.useCallback((function(e){return p((function(n){return[].concat(n,[{current:e}])}))}),[]);return e.useEffect((function(){if(null!=o&&o.length||w.length){var e=function(){var e=[];return(o||w).forEach((function(n){var t=n.current;return t&&e.push(t)})),e},r=function(t){n(t,l)||a&&function(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}(t)||!e().every((function(e){return!e.contains(t.target)}))||g.current(t)},u=function(t){return setTimeout((function(){var r=document.activeElement;"IFRAME"!==(null==r?void 0:r.tagName)||n(r,l)||e().includes(r)||g.current(t)}),0)},i=function(){s.forEach((function(e){return document.removeEventListener(e,r,t(e))})),m&&window.removeEventListener("blur",u)};if(!c)return s.forEach((function(e){return document.addEventListener(e,r,t(e))})),m&&window.addEventListener("blur",u),function(){return i()};i()}}),[w,l,a,c,m,JSON.stringify(s)]),h};
